<div class="card">
  <div class="date-room-controls">
    <div class="control-group">
      <div class="input-with-icon">
        <i class="fas fa-calendar-alt"></i>
        <p-calendar id="startDate" [(ngModel)]="startDate" (ngModelChange)="onDateRangeChange()" [showButtonBar]="true"
          dateFormat="dd.mm.yy" placeholder="Baslangic Tarihi"></p-calendar>
      </div>
      <div class="input-with-icon">
        <i class="fas fa-calendar-alt"></i>
        <p-calendar id="endDate" [(ngModel)]="endDate" (ngModelChange)="onDateRangeChange()" [showButtonBar]="true"
          dateFormat="dd.mm.yy" placeholder="Bitis Tarihi"></p-calendar>
      </div>
      <div class="input-with-icon">
        <i class="fas fa-bed"></i>
        <p-multiSelect id="roomTypes" [(ngModel)]="selectedRoomTypes" [options]="availableRoomTypes" optionLabel="name"
          placeholder="Oda Tipleri Seç" (onChange)="updateRoomSelection()"></p-multiSelect>
      </div>

       <!-- Satışı Durdur Checkbox -->
    <div class="checkbox-container">
      <p-checkbox [(ngModel)]="stopSales" binary="true" label="Satisi Durdur"></p-checkbox>
    </div>
    </div>
  </div>

  <div *ngIf="displayedDates.length && selectedRoomTypes.length" class="card table-card">
    <p-table [value]="tableData" [scrollable]="true">
      <ng-template pTemplate="header">
        <tr class="table-header">
          <th>Oda Tipi</th>
          <th *ngFor="let date of displayedDates; trackBy: trackByIndex">{{ date | date: 'dd.MM.yyyy' }}</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-row>
        <tr>
          <td class="room-type">{{ row.roomType }}</td>
          <td *ngFor="let cell of row.cells; trackBy: trackByIndex">
            <div class="cell-content" 

            [ngClass]="{
              'default-border': cell.invalid === undefined, 
              'error-border': cell.invalid === true,
              'success-border': cell.invalid === false 
            }"
            
            >
              <div class="input-group">
                <i class="fas fa-euro-sign"></i>
                <p-inputNumber [(ngModel)]="cell.basePrice" [min]="0" (ngModelChange)="onBasePriceChange(cell)"
                  placeholder="Base Fiyat"></p-inputNumber>
              </div>
              <ng-container *ngFor="let pax of cell.paxes; let i = index; trackBy: trackByIndex">
                <div class="input-group">
                  <i class="fas fa-user"></i>
                  <p-inputNumber [(ngModel)]="pax.price" [min]="0" placeholder="Misafir Fiyati"></p-inputNumber>
                  <i class="fas fa-x"></i>
                  <p-dropdown [(ngModel)]="pax.multiplier" [options]="multiplierOptions" optionLabel="label"
                    optionValue="value" (ngModelChange)="onMultiplierChange(cell, i)"></p-dropdown>
                </div>
              </ng-container>
              <ng-container *ngIf="stopSales">
                <div class="input-group">
                  <i class="fas fa-ban"></i>
                  <p-dropdown [(ngModel)]="cell.stopSales" [options]="stopSalesOptions" placeholder="Satisi Durdur">
                  </p-dropdown>
                </div>
              </ng-container>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <button pButton label="Kaydet" (click)="saveData()" class="save-button"></button>
  </div>
</div>
<!-- rgb(135, 212, 135); -->